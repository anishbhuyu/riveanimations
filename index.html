<script>
  const canvas = document.getElementById('riveCanvas');
  const DPR = window.devicePixelRatio || 1;

  function resizeCanvas() {
    const rect = canvas.getBoundingClientRect();
    let scaleFactor = DPR;

    // Lower scale factor for mobile devices for smoother animation
    if (window.innerWidth <= 768) {
      scaleFactor = Math.min(2, DPR); // caps DPR at 2 (most phones)
    }

    canvas.width = rect.width * scaleFactor;
    canvas.height = rect.height * scaleFactor;
  }

  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  const riveInstance = new rive.Rive({
    src: './kukucha.riv',
    canvas: canvas,
    autoplay: true,
    stateMachines: 'State Machine 1', // your exact name
    fit: rive.Fit.contain,
    alignment: rive.Alignment.center,
    onLoad: () => {
      console.log('✅ Kukucha optimized for mobile!');
      resizeCanvas();
    },
    onLoadError: (err) => {
      console.error('❌ Kukucha load error:', err);
    },
  });
</script>
